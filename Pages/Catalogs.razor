@page "/catalogs/{url}/{NovelId}/{NovelName}/{NovelAddr}"
@using MauiApp3.Common;
@using MauiApp3.Data;
@using System.Text.Encodings.Web;
@using System.Text;
@inject NavigationManager Navigation
@inject SoduService soduService;
@if (novelContent == null)
{
    <p>Dataloading</p>
}
else
{
    <div class="btn-group container">
        <NavLink href="/index/1" class="btn btn-lg btn-block btn-outline-primary">主页</NavLink>
        
        <NavLink href="/records" class="btn btn-lg btn-block btn-outline-primary">历史记录</NavLink>
        @if (!string.IsNullOrEmpty(novelContent.Next))
        {
            <a @onclick=@(e=>Navigation.GoTo("/catalogs",novelContent.Next,NovelId,NovelName,NovelAddr)) @onclick:preventDefault class="btn btn-lg btn-block btn-outline-primary">下一页</a>
        }
    </div>
    
    <div style="background:#e6e6e6">@(new MarkupString(novelContent.Content))</div>
    <div class="btn-group container">
        <NavLink href="/index/1" class="btn btn-lg btn-block btn-outline-primary">主页</NavLink>
        @if (!string.IsNullOrEmpty(novelContent.Next))
        {
            <a @onclick=@(e=>Navigation.GoTo("/catalogs",novelContent.Next,NovelId,NovelName,NovelAddr)) @onclick:preventDefault class="btn btn-lg btn-block btn-outline-primary">下一页</a>
        }
    </div>
}
@code {
    [Parameter]
    public string url {get;set;}
    [Parameter]
    public string NovelId { get; set; }
    [Parameter]
    public string NovelName { get; set; }
    [Parameter]
    public string NovelAddr { get; set; }
    public MauiApp3.Model.NovelContent novelContent;
  
    protected override async Task OnParametersSetAsync()
    {
        novelContent = await soduService.GetChapter(url,NovelId,NovelName,NovelAddr);
    }
   
}
